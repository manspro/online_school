"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const asset_generator_1 = require("../generators/asset.generator");
const path = require("path");
const template_builder_1 = require("../builders/template.builder");
const asset_enum_1 = require("../../../common/asset/enums/asset.enum");
const file_name_builder_1 = require("../builders/file-name.builder");
const asset_builder_1 = require("../builders/asset.builder");
const class_name_builder_1 = require("../builders/class-name.builder");
class ModuleProcessor {
    constructor(_name, _extension) {
        this._name = _name;
        this._extension = _extension;
        this._generator = new asset_generator_1.AssetGenerator();
        this._assets = [];
    }
    process() {
        this.buildAssets();
        return this.generate();
    }
    buildAssets() {
        const className = new class_name_builder_1.ClassNameBuilder()
            .addName(this._name)
            .addAsset(asset_enum_1.AssetEnum.MODULE)
            .build();
        const asset = new asset_builder_1.AssetBuilder()
            .addClassName(className)
            .addFilename(path.join(process.cwd(), 'src/app/modules', this._name, new file_name_builder_1.FileNameBuilder()
            .addAsset(asset_enum_1.AssetEnum.MODULE)
            .addName(this._name)
            .addExtension(this._extension)
            .addTest(false)
            .build()))
            .addTemplate(new template_builder_1.TemplateBuilder()
            .addFilename(path.resolve(__dirname, `../../../assets/${this._extension}/module/module.${this._extension}.template`))
            .addReplacer({
            __CLASS_NAME__: className
        })
            .build())
            .build();
        this._assets.push(asset);
    }
    generate() {
        return this._generator.generate(this._assets[0]);
    }
}
exports.ModuleProcessor = ModuleProcessor;
