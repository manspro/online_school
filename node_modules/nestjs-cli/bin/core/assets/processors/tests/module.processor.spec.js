"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const module_processor_1 = require("../module.processor");
const asset_generator_1 = require("../../generators/asset.generator");
const sinon = require("sinon");
const path = require("path");
describe('ModuleProcessor', () => {
    const name = 'name';
    const extension = 'ts';
    let sandbox;
    beforeEach(() => sandbox = sinon.sandbox.create());
    afterEach(() => sandbox.restore());
    let processor;
    beforeEach(() => processor = new module_processor_1.ModuleProcessor(name, extension));
    let generateStub;
    beforeEach(() => {
        generateStub = sandbox.stub(asset_generator_1.AssetGenerator.prototype, 'generate').callsFake(() => Promise.resolve());
    });
    describe('#process()', () => {
        it('should generate module assets', () => {
            const assets = [
                {
                    filename: path.join(process.cwd(), 'src/app/modules/', 'name/name.module.ts'),
                    className: 'NameModule',
                    template: {
                        filename: path.resolve(__dirname, '../../../../assets/ts/module/module.ts.template'),
                        replacer: {
                            __CLASS_NAME__: 'NameModule'
                        }
                    }
                }
            ];
            return processor.process()
                .then(() => {
                sinon.assert.calledWith(generateStub, assets[0]);
            });
        });
    });
});
