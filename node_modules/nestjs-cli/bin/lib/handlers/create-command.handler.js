"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const file_system_utils_1 = require("../../core/utils/file-system.utils");
const path = require("path");
const color_service_1 = require("../../core/logger/color.service");
const git_repository_1 = require("../../core/project/repositories/git.repository");
const logger_service_1 = require("../../core/logger/logger.service");
class CreateCommandHandler {
    execute(args, options, logger) {
        logger_service_1.LoggerService.setLogger(logger);
        const name = args.name;
        const destination = args.destination || name;
        const repository = new git_repository_1.GitRepository(CreateCommandHandler.DEFAULT_REPOSITORY, destination);
        return repository.clone()
            .then(() => file_system_utils_1.FileSystemUtils.readdir(path.join(process.cwd(), destination)))
            .then(files => files.forEach(file => logger.info(color_service_1.ColorService.green('create'), file)));
    }
}
CreateCommandHandler.DEFAULT_REPOSITORY = 'https://github.com/ThomRick/nest-typescript-starter.git';
exports.CreateCommandHandler = CreateCommandHandler;
