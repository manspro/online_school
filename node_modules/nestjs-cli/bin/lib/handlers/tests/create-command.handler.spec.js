"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const create_command_handler_1 = require("../create-command.handler");
const sinon = require("sinon");
const git_repository_1 = require("../../../core/project/repositories/git.repository");
const file_system_utils_1 = require("../../../core/utils/file-system.utils");
describe('CreateCommandHandler', () => {
    let sandbox;
    beforeEach(() => sandbox = sinon.sandbox.create());
    afterEach(() => sandbox.restore());
    let handler;
    beforeEach(() => {
        handler = new create_command_handler_1.CreateCommandHandler();
    });
    let cloneStub;
    beforeEach(() => {
        cloneStub = sandbox.stub(git_repository_1.GitRepository.prototype, 'clone').callsFake(() => Promise.resolve());
        sandbox.stub(file_system_utils_1.FileSystemUtils, 'readdir').callsFake(() => Promise.resolve([]));
    });
    describe('#execute()', () => {
        it('should clone the project repository to destination', () => {
            return handler.execute({ name: 'application', destination: 'path/to/application' }, {}, console)
                .then(() => {
                sinon.assert.calledOnce(cloneStub);
            });
        });
    });
});
